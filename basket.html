<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basket</title>
    <link rel="stylesheet" href="basket.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="icon" type="image/x-icon" href="imgs/CODS_LOGO.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="css/bootstrap.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body class="d-flex flex-column min-vh-100">
    <header>
        <nav id="myNavbar" class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
            <div class="container ">
                <a class="navbar-brand" href="front.html">CODS</a>
                <button
                    class="navbar-toggler hidden-lg-up"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapsibleNavId"
                    aria-controls="collapsibleNavId"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                ></button>
                <div class="collapse navbar-collapse" id="collapsibleNavId">
                    <ul id="menu" class="navbar-nav me-auto mt-2 mt-lg-0">
                        <li tabindex="0" class="nav-item">
                            <a class="nav-link active" href="front.html" aria-current="page" style="color:#2E4C72 ;">Home
                                <span class="visually-hidden">(current)</span></a>
                        </li>
                        <li tabindex="0" class="nav-item">
                            <a class="nav-link" href="catalog.html">Catalog</a>
                        </li>
                        <li tabindex="0" class="nav-item">
                            <a class="nav-link" href="basket.html">Basket</a>
                        </li>
                        <li tabindex="0" class="nav-item">
                            <a class="nav-link" href="profile.html">Profile</a>
                        </li>
                    </ul>
                    <button id="logoutButton" class="btn ">Logout</button>
                
                    <button
                            id="changeBtn"
                            class="btn my-1 my-sm-0 mx-4"
                            type="button"
                            onclick="changeBackground()"
                        >
                            Change Colors
                        </button>
                        <audio id="saveSound" src="imgs/save.mp3" preload="auto"></audio>
                </div>
            </div>
        </nav>
    </header>

    <main class="flex-grow-1 mt-5">
        <div class="catalog-container g-4 justify-content-center py-5">
           <!-- Filter Section -->
           <div id="myFilterSection" class="filter-section text-white ms-5">
            <label for="colorFilter">Color:</label>
            <select class="mySelect" id="colorFilter">
                <option value="">All</option>
                <option value="black">Black</option>
                <option value="white">White</option>
                <option value="gold">Gold</option>
                
            </select>

            <label for="sizeFilter">Size:</label>
            <select class="mySelect" id="sizeFilter">
                <option value="">All</option>
                <option value="S">Small</option>
                <option value="M">Medium</option>
                <option value="L">Large</option>
            </select>

            <label for="priceRange">Price Range:</label>
            <select class="mySelect" id="priceRange">
                <option value="">All</option>
                <option value="low">0 - 10,000 ₸</option>
                <option value="medium">10,000 - 50,000 ₸</option>
                <option value="high">50,000 ₸ and above</option>
            </select>
        </div>
        <div id="myCatalog" class="catalog-container">
            <div class="product-grid">
                <div class="product-item card p-3 mt-5 mb-3 ms-4" data-color="black" data-size="M" data-price="25000">
                    <img src="images/rousers.jpg" class="card-img-top product-img" alt="T-Shirt">
                    <p>Tall wide leg pull on trouser</p>
                    <br>
                    <div class="price">Price: 25,000 ₸</div>
                    <div class="d-flex justify-content-center mt-2 rating" data-product="5"> <!-- Добавляем идентификатор продукта -->
                        <span class="star" data-index="0" data-product="1">★</span>
                        <span class="star" data-index="1" data-product="1">★</span>
                        <span class="star" data-index="2" data-product="1">★</span>
                        <span class="star" data-index="3" data-product="1">★</span>
                        <span class="star" data-index="4" data-product="1">★</span>
                    </div>
                    
                </div>
                <div class="product-item card p-3 mt-5 mb-3 ms-4" data-color="gold" data-size="S" data-price="10000">
                    <img src="images/necklace.jpg" class="card-img-top product-img" alt="T-Shirt">
                    <p>Tiffany  Necklace in Yellow Gold</p>
                     <div class="price">Price: 10,000 ₸</div>
                     <div class="d-flex justify-content-center mt-2 rating" data-product="1"> <!-- Добавляем идентификатор продукта -->
                        <span class="star" data-index="0" data-product="1">★</span>
                        <span class="star" data-index="1" data-product="1">★</span>
                        <span class="star" data-index="2" data-product="1">★</span>
                        <span class="star" data-index="3" data-product="1">★</span>
                        <span class="star" data-index="4" data-product="1">★</span>
                    </div>
                </div>
                <div class="product-item card p-3 mt-5 mb-3 ms-4" data-color="black" data-size="S" data-price="80000">
                    <img src="images/dress.jpg" class="card-img-top product-img" alt="T-Shirt">
                    <p>PRETTYGARDEN Women's Cross Neck </p>
                     <div class="price">Price: 80,000 ₸</div>
                     <div class="d-flex justify-content-center mt-2 rating" data-product="2"> <!-- Добавляем идентификатор продукта -->
                        <span class="star" data-index="0" data-product="1">★</span>
                        <span class="star" data-index="1" data-product="1">★</span>
                        <span class="star" data-index="2" data-product="1">★</span>
                        <span class="star" data-index="3" data-product="1">★</span>
                        <span class="star" data-index="4" data-product="1">★</span>
                    </div>
                </div>
                <div class="product-item card p-3 mt-5 mb-3 ms-4 " data-color="white" data-size="S" data-price="23000">
                    <img src="images/bagss.jpg" class="card-img-top product-img" alt="T-Shirt">
                    <p>ASOS DESIGN tubular handle tote bag </p>
                     <div class="price">Price: 23,000 ₸</div>
                     <div class="d-flex justify-content-center mt-2 rating" data-product="3"> <!-- Добавляем идентификатор продукта -->
                        <span class="star" data-index="0" data-product="1">★</span>
                        <span class="star" data-index="1" data-product="1">★</span>
                        <span class="star" data-index="2" data-product="1">★</span>
                        <span class="star" data-index="3" data-product="1">★</span>
                        <span class="star" data-index="4" data-product="1">★</span>
                    </div>
                </div>
                <div class="product-item card p-3 mt-5 mb-3 ms-4" data-color="black" data-size="L" data-price="50000">
                    <img src="images/jacket.jpg" class="card-img-top product-img" alt="T-Shirt">
                    <p>Retro Nuptse down puffer jacket in black</p>
                     <div class="price">Price: 50,000 ₸</div>
                     <div class="d-flex justify-content-center mt-2 rating" data-product="4"> <!-- Добавляем идентификатор продукта -->
                        <span class="star" data-index="0" data-product="1">★</span>
                        <span class="star" data-index="1" data-product="1">★</span>
                        <span class="star" data-index="2" data-product="1">★</span>
                        <span class="star" data-index="3" data-product="1">★</span>
                        <span class="star" data-index="4" data-product="1">★</span>
                    </div>
                </div>
            </div>
        </div>

        <section class="checkout text-white  mt-4 text-center">
            <h2>Checkout Summary</h2> 
            <div>
                <button type="button" class="btn text-white">Checkout Price: 118000 ₸</button>
            </div>
        </section>

        <blockquote class="text-white text-center my-4">
            "Style is a way to say who you are without having to speak." - Rachel Zoe
        </blockquote>

        <ul class="text-white list-unstyled text-center">
            <li>Free delivery on orders over 50000 ₸</li>
            <li>30-day return policy</li>
            <li>24/7 customer support</li>
        </ul>
        <div class="ms-5 mb-5">
            <button class="btn text-white" onclick="showForm(); playSound()">Contact us</button>
            <div id="popupForm" class="popup">
                <span onclick="closeForm()">Close</span>
                <form>
                    <input type="email" placeholder="Email" required>
                    <button type="submit">Submit</button>
                </form>
            </div>
        
        
            </div>
        </div>
    </main>

    <footer id="myFooter" class="footer-section text-white text-center mt-3 p-3 bottom-0 start-0 w-100">
        <p>Created by Ussurbayeva Inkar, Ablanova Dariya, Alpieva Leila.</p>
        <a id="footer_text" href="#top">Back to top</a>
    </footer>

    <!-- Audio element for notification sound -->
    <audio id="notificationSound" src="notification.mp3"></audio>

    <script src="basket.js"></script>
    <script src="login.js"></script>
    <script>// Функция фильтрации продуктов
        function filterProducts() {
          const colorFilter = document.getElementById('colorFilter').value;
          const sizeFilter = document.getElementById('sizeFilter').value;
          const priceFilter = document.getElementById('priceRange').value;
        
          const products = Array.from(document.getElementsByClassName('product-item')); // Преобразуем в массив
        
          products.forEach((product) => {
              const productColor = product.getAttribute('data-color');
              const productSize = product.getAttribute('data-size');
              const productPrice = parseInt(product.getAttribute('data-price'));
        
              // Проверяем фильтры
              const matchesColor = !colorFilter || productColor === colorFilter;
              const matchesSize = !sizeFilter || productSize === sizeFilter;
              const matchesPrice = (priceFilter === 'low' && productPrice <= 10000) ||
                                   (priceFilter === 'medium' && productPrice > 10000 && productPrice <= 50000) ||
                                   (priceFilter === 'high' && productPrice > 50000) ||
                                   !priceFilter;
        
              // Показываем или скрываем продукт на основе фильтров
              if (matchesColor && matchesSize && matchesPrice) {
                  product.style.display = 'block'; // Показываем продукт
              } else {
                  product.style.display = 'none'; // Скрываем продукт
              }
          });
        
          // Сохраняем настройки фильтров в локальное хранилище
          saveFilterSettings();
        }
        
        // Сохраняем настройки фильтров в локальное хранилище
        function saveFilterSettings() {
          const selectedFilters = {
              color: document.getElementById("colorFilter").value,
              size: document.getElementById("sizeFilter").value,
              priceRange: document.getElementById("priceRange").value,
          };
        
          localStorage.setItem("filterSettings", JSON.stringify(selectedFilters));
        }
        
        // Применяем настройки фильтров из локального хранилища при загрузке страницы
        function applyFilterSettings() {
          const savedFilters = JSON.parse(localStorage.getItem("filterSettings"));
        
          if (savedFilters) {
              document.getElementById("colorFilter").value = savedFilters.color || "";
              document.getElementById("sizeFilter").value = savedFilters.size || "";
              document.getElementById("priceRange").value = savedFilters.priceRange || "";
              
              // Применяем фильтры после загрузки
              filterProducts();
          }
        }
        document.getElementById("logoutButton").addEventListener("click", function() {
          // Если нужно очистить данные после логаута
          // localStorage.removeItem("username");
          // localStorage.removeItem("email");
        
          // Перенаправление на страницу логина
          window.location.href = "index.html";
        });
        
        // Вызываем applyFilterSettings при загрузке страницы
        document.addEventListener("DOMContentLoaded", applyFilterSettings);
        
        // Добавляем слушатели событий, чтобы сохранять настройки фильтров при изменении
        document.getElementById("colorFilter").addEventListener("change", filterProducts);
        document.getElementById("sizeFilter").addEventListener("change", filterProducts);
        document.getElementById("priceRange").addEventListener("change", filterProducts);
        </script>
</body>
</html>
